"use strict";(self.webpackChunkadmin_panel=self.webpackChunkadmin_panel||[]).push([[336],{2336:function(e,s,t){t.r(s),t.d(s,{default:function(){return w}});var a=t(5861),n=t(885),r=t(7757),o=t.n(r),i=t(2791),l=t(9804),c=t(6713),d=t(4569),u=t.n(d),m=t(3504),p=t(6871),f=function(e){sessionStorage.setItem("user",JSON.stringify(e));var s=sessionStorage.getItem("user");return s?JSON.parse(s):null},v=t(3855),g=t(3360),h=t(5879),x=t(2635),j=t(2062),N=t.n(j),b=t(184),w=function(){var e=(0,i.useContext)(l.Z).setAuth,s=(0,i.useRef)(),t=(0,i.useRef)(),r=(0,p.s0)(),d=(0,i.useState)(""),j=(0,n.Z)(d,2),w=j[0],S=j[1],Z=(0,i.useState)(""),k=(0,n.Z)(Z,2),y=k[0],C=k[1],O=(0,i.useState)(""),_=(0,n.Z)(O,2),I=_[0],P=_[1],z=(0,i.useState)(""),T=(0,n.Z)(z,2),U=(T[0],T[1]);(0,i.useEffect)((function(){s.current.focus()}),[]),(0,i.useEffect)((function(){P("")}),[w,y]);var A=function(){var s=(0,a.Z)(o().mark((function s(a){var n,i,l,d,m,p,v;return o().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a.preventDefault(),s.prev=1,s.next=4,u().post(c.Z+"login/admin_login",JSON.stringify({email:w,password:y}),{headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:i=s.sent,l=i&&i.data&&i.data.data?i.data.data.jwt:"",d=i&&i.data&&i.data.data?i.data.data.user_data:"",m=null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.roles,e({email:w,password:y,roles:m,accessToken:l}),S(""),C(""),U(i.data.status),f(d),o=l,sessionStorage.setItem("token",o),sessionStorage.getItem("token"),l?N()("You have Successfully Looged In!",{timer:1e3,icon:"success",button:!1}).then((function(){r("/dashboard")})):N()({title:"Please check Username/Password!",icon:"warning",button:"Ok!"}),s.next=22;break;case 17:s.prev=17,s.t0=s.catch(1),console.log(s.t0),null!==s.t0&&void 0!==s.t0&&s.t0.response?400===(null===(p=s.t0.response)||void 0===p?void 0:p.status)?P("Missing Username or Password"):!1===(null===(v=s.t0.response)||void 0===v?void 0:v.status)?P("Unauthorized"):P("Login Failed"):P("No server Response"),t.current.focus();case 22:case"end":return s.stop()}var o}),s,null,[[1,17]])})));return function(e){return s.apply(this,arguments)}}();return(0,b.jsx)("div",{className:"login_outer",children:(0,b.jsxs)("section",{className:"login_container","data-aos":"zoom-in","data-aos-duration":"1000",children:[(0,b.jsx)("h5",{children:"SIGN IN TO PHOTO BOMB"}),(0,b.jsxs)(v.Z,{onSubmit:A,className:"login_form",children:[(0,b.jsx)("p",{ref:t,className:I?"errmsg":"offscreen","aria-live":"assertive",children:I}),(0,b.jsxs)("div",{className:"mb-3 position-relative",children:[(0,b.jsx)(h.Z,{className:"form-control-icon"}),(0,b.jsx)(v.Z.Control,{type:"text",id:"email",placeholder:"Email",className:"border-0 border-bottom rounded-0",ref:s,onChange:function(e){return S(e.target.value)},value:w,size:"lg"})]}),(0,b.jsxs)("div",{className:"mb-2 position-relative",children:[(0,b.jsx)(x.Z,{className:"form-control-icon"}),(0,b.jsx)(v.Z.Control,{size:"lg",type:"password",id:"password",className:"border-0 border-bottom rounded-0",placeholder:"Password",onChange:function(e){return C(e.target.value)},value:y})]}),(0,b.jsx)("div",{className:"mb-3",style:{textAlign:"right"},children:(0,b.jsx)(m.rU,{to:"/forget_password",children:"Forget Password"})}),(0,b.jsx)("div",{className:"d-grid",children:(0,b.jsx)(g.Z,{type:"submit",size:"lg",children:"Login"})})]})]})})}}}]);
//# sourceMappingURL=336.6bcda766.chunk.js.map