{"version":3,"file":"static/js/336.6bcda766.chunk.js","mappings":"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","sources":["Utils/common.js","component/Login.js"],"sourcesContent":["\r\nexport const getUser=(userinfo)=>{\r\n    sessionStorage.setItem(\"user\", JSON.stringify(userinfo));\r\n    const userStr = sessionStorage.getItem('user');\r\n    if(userStr) {\r\n        return JSON.parse(userStr)\r\n    } \r\n    else return null;\r\n}\r\n\r\nexport const getToken=(token)=>{\r\n    // debugger\r\n    sessionStorage.setItem('token', token);\r\n    sessionStorage.getItem('token');\r\n    if(token){\r\n        return token;\r\n    }\r\n    else return null;\r\n}\r\nexport const removeUserSession=()=>{\r\n    sessionStorage.clear();\r\n}","import React, { useState, useEffect, useRef, useContext } from \"react\";\r\nimport AuthContext from \"../context/Authprovider\";\r\nimport base_url from \"../api/api\";\r\nimport axios from \"axios\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { getToken, getUser } from \"../Utils/common\";\r\nimport { Form, Button } from \"react-bootstrap\";\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport VpnLockIcon from '@material-ui/icons/VpnLock';\r\nimport swal from \"sweetalert\";\r\n\r\nconst LOGIN_URL = 'login/admin_login'\r\n\r\n\r\n\r\nconst Login = () => {\r\n    const { setAuth } = useContext(AuthContext);\r\n    const userRef = useRef();\r\n    const errRef = useRef();\r\n\r\n    const history = useNavigate();\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errMsg, setErrMsg] = useState('');\r\n    const [success, setSuccess] = useState('');\r\n\r\n    useEffect(() => {\r\n        userRef.current.focus();\r\n    }, [])\r\n    useEffect(() => {\r\n        setErrMsg('');\r\n    }, [email, password])\r\n\r\n\r\n\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await axios.post(base_url + LOGIN_URL, JSON.stringify({ email, password }),\r\n                {\r\n                    headers: {\r\n                        'Accept': 'application/json',\r\n                        // 'Access-Control-Allow-Origin': '*',\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                });\r\n\r\n            const accessToken = response && response.data && response.data.data ? response.data.data.jwt : \"\";\r\n            const user_data = response && response.data && response.data.data ? response.data.data.user_data : \"\";\r\n            const roles = response?.data?.roles;\r\n            setAuth({ email, password, roles, accessToken })\r\n            setEmail('');\r\n            setPassword('');\r\n            // debugger\r\n            setSuccess(response.data.status);\r\n            getUser(user_data);\r\n            getToken(accessToken);\r\n            if (accessToken) {\r\n                swal('You have Successfully Looged In!', {\r\n                    timer: 1000,\r\n                    icon: \"success\",\r\n                    button: false,\r\n                }).then(() => {\r\n                    history(\"/dashboard\")\r\n                })\r\n            } else {\r\n                swal({\r\n                    title: \"Please check Username/Password!\",\r\n                    icon: \"warning\",\r\n                    button: \"Ok!\",\r\n                });\r\n            }\r\n        } catch (err) {\r\n            console.log(err);\r\n            if (!err?.response) {\r\n                setErrMsg('No server Response');\r\n            } else if (err.response?.status === 400) {\r\n                setErrMsg('Missing Username or Password');\r\n            } else if (err.response?.status === false) {\r\n                setErrMsg('Unauthorized');\r\n            } else {\r\n                setErrMsg('Login Failed');\r\n            }\r\n            errRef.current.focus();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"login_outer\">\r\n            <section className=\"login_container\" data-aos=\"zoom-in\" data-aos-duration=\"1000\">\r\n                <h5>SIGN IN TO PHOTO BOMB</h5>\r\n                <Form onSubmit={handleSubmit} className=\"login_form\">\r\n                    <p ref={errRef} className={errMsg ? \"errmsg\" : \"offscreen\"} aria-live=\"assertive\">{errMsg}</p>\r\n                    <div className=\"mb-3 position-relative\">\r\n                        <EmailIcon className=\"form-control-icon\" />\r\n                        <Form.Control\r\n                            type=\"text\"\r\n                            id=\"email\"\r\n                            placeholder=\"Email\"\r\n                            className=\"border-0 border-bottom rounded-0\"\r\n                            ref={userRef}\r\n                            onChange={(e) => setEmail(e.target.value)} value={email}\r\n                            size=\"lg\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-2 position-relative\">\r\n                        <VpnLockIcon className=\"form-control-icon\" />\r\n                        <Form.Control\r\n                            size=\"lg\"\r\n                            type=\"password\"\r\n                            id=\"password\"\r\n                            className=\"border-0 border-bottom rounded-0\"\r\n                            placeholder=\"Password\"\r\n                            onChange={(e) => setPassword(e.target.value)} value={password}\r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-3\" style={{ textAlign: \"right\" }}>\r\n                        <Link to=\"/forget_password\">Forget Password</Link>\r\n                    </div>\r\n                    <div className=\"d-grid\">\r\n                        <Button type=\"submit\" size=\"lg\">Login</Button>\r\n                    </div>\r\n                </Form>\r\n            </section>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"],"names":["getUser","userinfo","sessionStorage","setItem","JSON","stringify","userStr","getItem","parse","setAuth","useContext","AuthContext","userRef","useRef","errRef","history","useNavigate","useState","email","setEmail","password","setPassword","errMsg","setErrMsg","setSuccess","useEffect","current","focus","handleSubmit","e","preventDefault","axios","base_url","headers","response","accessToken","data","jwt","user_data","roles","status","token","swal","timer","icon","button","then","title","console","log","className","Form","onSubmit","ref","Email","type","id","placeholder","onChange","target","value","size","VpnLock","style","textAlign","to","Button"],"sourceRoot":""}